"use strict";(self["webpackChunkibookingsystem_vue"]=self["webpackChunkibookingsystem_vue"]||[]).push([[483],{5483:function(s,e,t){t.r(e),t.d(e,{default:function(){return m}});var a=function(){var s=this,e=s._self._c;return e("div",{staticClass:"login-body"},[e("div",{staticClass:"login-form"},[e("h1",{staticClass:"form-title"},[s._v("欢迎登录自习座位预定系统")]),e("div",{staticClass:"form"},[e("el-form",{ref:"form",staticClass:"form-form",attrs:{model:s.form,"label-width":"60px"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{id:"username"},model:{value:s.form.username,callback:function(e){s.$set(s.form,"username",e)},expression:"form.username"}})],1),e("el-form-item",{attrs:{label:"密码"}},[e("el-input",{attrs:{id:"password",type:"password"},model:{value:s.form.passwd,callback:function(e){s.$set(s.form,"passwd",e)},expression:"form.passwd"}})],1),e("el-form-item",[e("el-button",{on:{click:s.register}},[s._v("注 册")]),e("el-button",{attrs:{id:"onStudentSubmit",type:"primary",loading:s.isLogin},on:{click:s.onStudentSubmit}},[s._v("用户登录")]),e("el-button",{attrs:{id:"onManagerSubmit",type:"primary",loading:s.isLogin},on:{click:s.onManagerSubmit}},[s._v("管理员登录")])],1)],1)],1)])])},n=[],r=(t(7658),t(2344)),i={name:"Login",data(){return{form:{username:"",passwd:""},isLogin:!1,loginSuccess:!1}},methods:{onManagerSubmit(){this.isLogin=!0,(0,r.LA)(this.form).then((s=>{this.isLogin=!1,1==s.data.results.login_status?(this.$message({message:"登录成功",type:"success"}),this.$router.push("/admin")):1!=s.data.results.login_status&&this.$message.error(s.data.login_msg)}))},onStudentSubmit(){this.isLogin=!0,(0,r.pi)(this.form).then((s=>{this.isLogin=!1,console.log(s),1==s.data.results.login_status?(this.loginSuccess=!0,this.$message({message:"登录成功",type:"success"}),this.$router.push(`/user/${s.data.results.data.id}`)):1!=s.data.results.login_status&&(this.$message.error(s.data.results.login_msg),this.loginSuccess=!1)}))},register(){this.$router.push("/register")}},created(){}},o=i,u=t(1001),l=(0,u.Z)(o,a,n,!1,null,"1c585e72",null),m=l.exports},2344:function(s,e,t){t.d(e,{LA:function(){return n},pi:function(){return r},z2:function(){return i}});var a=t(960);function n(s){let e=new URLSearchParams;return e.append("username",s.username),e.append("passwd",s.passwd),(0,a.W)({method:"post",url:"/login/admin",data:e})}function r(s){let e=new URLSearchParams;return e.append("username",s.username),e.append("passwd",s.passwd),(0,a.W)({method:"post",url:"/login/student",data:e})}function i(s){let e=new URLSearchParams;return e.append("username",s.username),e.append("passwd",s.passwd),e.append("name",s.name),e.append("email",s.email),(0,a.W)({method:"post",url:"/sign_up/student",data:e})}}}]);
//# sourceMappingURL=483.137bd4ac.js.map